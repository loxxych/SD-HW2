# ВШЭ-Банк: Модуль "Учет финансов"

## Структура классов:

Классы основных доменных моделей:
- BankAccount: хранит уникальный id и название
- Category: хранит уникальный id, название, тип (Type) - доход или расход
- Operation: хранит уникальный id, название, банковский счет (BankAccount), категорию (Category), сумму, дату, описание (а также некоторые вспомогательные поля - название счета и время выполнения)

Для каждого класса основной доменной модели предусмотрена фабрика:
- BankAccountFactory
- CategoryFactory
- OperationFactory

Менеджеры классов основной доменной модели:
- BankAccountManager - управляет полями счетов
- CategoryManager - управляет полями категорий
- OperationManager - управляет полями операций

Репозитории для хранения информации о финансах:
- BankAccountRepository - хранение счетов
- CategoryRepository - хранение категорий
- OperationRepository - хранение операций

И другие вспомогательные классы

## Примененные паттерны
1. Фасад
    В фасады обернута работа с основными классами: BankAccountManager, CategoryManager, OperationManager
    Репозитории: BankAccountRepository, CategoryRepository, OperationRepository
    Сервисы для экспорта и импорта: ExportService, ImportService
    Сервис для формирования аналитики: AnalyticsService
    
2. Посетитель
    Использован для экспорта данных. Соответственно имеются 2 типа посетителей для экспорта - CsvExportVisitor и JsonExportVisitor
    
3. Шаблонный метод
    Использован для импорта данных. Соответственно имеется абстрактный класс FileImporter с шаблонным методом ImportFromFile, конкретные импортеры - CsvFileImporter и JsonFileImporter, переопределяющие метод ReadInfoFromFile
    
4. Фабрика
    Для каждого класса основной доменной модели предусмотрена фабрика: BankAccountFactory, CategoryFactory, OperationFactory
    Также имеются фабрики для разных видов посетителей (при экспорте) и импортеров (при импорте)
    
5. Команда
    В команду обернут сценарий добавления операции: AddOperationCommand
    
6. Декоратор
    Декоратор над командой добавления операции: AddOperationCommandTimeMeasurer помимо добавления операции считает время, за которое это действие было выполнено, и сохраняет это значение
    
7. Одиночка
    Синглтон-класс DI контейнера: CompositionRoot, реализующий интеграцию зависимостей посредством DI контейнера
    
8. Стратегия
    Реализован при работе с аналитикой: AnalyticsDisplayer - класс-контекст, применяющий стратегии - OperationsAnalyst или WithdrawalDepositAnalyst. AnalyticsDisplayer выводит на экран аналитику в зависимости от выбранной стратегии - либо статистику по времени выполнения операций, либо по доходам и расходам.

## Как пользоваться приложением:
###При запуске появляется главное меню с несколькими опциями соответствующими названию:

- Счета: Перейти в меню счетов          
- Категории: Перейти в меню категорий               
- Операции: Перейти в меню операций                
- Аналитика: Посмотреть аналитику              
- Экспорт в файл: Экспорт данных об операциях или банковских счетах в файл желаемого формата (csv/json)
- Импорт из файла: Импорт данных об операциях или банковских счетах из файла (csv)
- Выход: завершение программы

### Меню счетов:
- Просмотр счетов: Просмотреть доступные счета      
- Добавление счета: Добавить новый счет, вводя название счета     
- Удаление счета: Удалить счет из предложенного списка доступных счетов      
- Редактирование счета: Редактировать счет из предложенного списка доступных счетов (можно изменить только название)      
- <- Назад: Вернуться в главное меню

### Меню категорий:
- Просмотр категорий: Просмотреть доступные категории             
- Добавление категории: Добавить новую категорию, выбрав тип (доход/расход) и вводя название        
- Удаление категории: Удалить категорию из предложенного списка доступных категорий  
- Редактирование категории: Редактировать счет из предложенного списка доступных счетов (можно изменить название или тип) 
- <- Назад: Вернуться в главное меню                 

### Меню операций:
- Просмотр операций: Просмотреть произведенные операции     
- Добавление операции: Добавить новую категорию, выбрав категорию, счет, вводя сумму и описание (по желанию)     
- Удаление операции: Удалить операцию из предложенного списка доступных операций
- Редактирование операции: Редактировать операцию из предложенного списка доступных операций (можно изменить категорию, счет, сумму, описание)
- <- Назад: Вернуться в главное меню                 

### Аналитика:
Пользователю дается выбор вида аналитики для отображения: по времени выполнения операций или по доходам и расходам. После выбора отображается соответствующая аналитика

### Экспорт:
Эксопртировать можно счета или операции в один из предложенных форматов: csv/json. После выбора соответствующих полей вводится название файла и производится экспорт.

### Импорт:
Импортировать можно операции из csv файла. Пользователь вводит название файла и производится импорт.
